<h1>Messages</h1>

<h2>Send a Message</h2>

<%= render 'form', message: @message %>

<hr>

<h2>Message Archive</h2>

<table class="table" id="messages-table">
  <thead>
    <tr>
      <th>Subject</th>
      <th>Body</th>
      <th>Sent By</th>
      <th>Sent At</th>
      <th>Status</th>
    </tr>
  </thead>

  <tbody>
    <% @messages.each do |message| %>
      <tr>
        <td><%= message.subject %></td>
        <td><%= message.body %></td>
        <td><%= message.user.name %></td>
        <td><%= message.created_at.in_time_zone('London').strftime('%m/%d/%Y %H:%M') %></td>                
        <td><%= message.pushed_state %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>